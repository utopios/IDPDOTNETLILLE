@page "/contacts"
@using CoursBlazorWebAssembly.Services
@inject ContactService _contactService;

<h3>Contacts</h3>
@*<FormContactComponent OnContactAdded="@AddContact"></FormContactComponent>*@
@foreach(Contact c in _contactService.Contacts)
{
    @*<div>
        @c.Id @c.Name @c.Phone
    </div>*@
    @*<ContactComponent Id="@c.Id" Name="@c.Name" Phone="@c.Phone"></ContactComponent>*@
    <ContactComponent Contact="@c" OnDeletedContact="@DeleteContact"></ContactComponent>
}

@code {
    private List<Contact> contacts;

    public Contacts()
    {
        contacts = new List<Contact>()
        {
            new Contact()
            {
                Id = 1,
                Name = "abadi",
                Phone = "06060606060"
            },
            new Contact()
            {
                Id = 2,
                Name = "toto",
                Phone = "06060606060"
            },
        };
    }

    public void DeleteContact(int id)
    {
        contacts.Remove(contacts.Find(c => c.Id == id));
    }

    //public void AddContact(Contact contact)
    //{
    //    contact.Id = contacts.Count + 1;
    //    contacts.Add(contact);
    //}
}
